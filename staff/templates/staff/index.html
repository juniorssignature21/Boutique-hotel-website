{% extends "./base.html" %} {% load static %} {% block title %} X-Empire -
{{role}} Dashboard {% endblock title %}
<!--[ Template main css file ]-->


{% block content %}

<div class="content">
  {% comment %} Page header {% endcomment %} 
  {% include "./header.html" %} 
  {% comment %} {%comment %}end Page header {% endcomment %} 
  <!-- start: page header area -->
  <div class="px-xl-5 px-lg-4 px-3 py-2 page-header">
    <ul class="list-unstyled action d-flex align-items-center mb-0">
      <li class="dropdown">
        <a href="#" data-bs-toggle="dropdown" aria-expanded="false">
          <svg
            class="svg-stroke"
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            viewBox="0 0 24 24"
            stroke="currentColor"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path
              d="M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"
            ></path>
            <path d="M9 12l6 0"></path>
            <path d="M12 9l0 6"></path>
          </svg>
        </a>
        <ul class="dropdown-menu dropdown-menu-end p-2 p-xl-3 shadow rounded-4">
          <li><a class="dropdown-item rounded-pill" href="#">New folder</a></li>
          <li>
            <a class="dropdown-item rounded-pill" href="#">File upload</a>
          </li>
          <li>
            <a class="dropdown-item rounded-pill" href="#">Google docs</a>
          </li>
          <li>
            <a class="dropdown-item rounded-pill" href="#">Google sheets</a>
          </li>
          <li><hr class="dropdown-divider" /></li>
          <li><a class="dropdown-item rounded-pill" href="#">+ Invite</a></li>
          <li>
            <a class="dropdown-item rounded-pill" href="#">Generate report</a>
          </li>
          <li>
            <a class="dropdown-item rounded-pill" href="#">New Reports</a>
          </li>
        </ul>
      </li>
      <li class="dropdown ms-3">
        <a
          href="#"
          data-bs-toggle="dropdown"
          data-bs-auto-close="outside"
          aria-expanded="false"
        >
          <svg
            class="svg-stroke"
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            viewBox="0 0 24 24"
            stroke="currentColor"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path
              d="M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z"
            ></path>
          </svg>
        </a>
        <div
          class="dropdown-menu dropdown-menu-end p-2 p-xl-3 shadow rounded-4"
          style="width: 300px"
        >
          <h6>Filter Options</h6>
          <div class="row g-3 mt-3">
            <div class="col-12">
              <label class="form-label small text-muted">Sorted by:</label>
              <input type="search" class="form-control" placeholder="Search" />
            </div>
            <div class="col-12">
              <label class="form-label small text-muted">Status:</label>
              <select class="form-select">
                <option selected>Choose...</option>
                <option>...</option>
              </select>
            </div>
            <div class="col-12">
              <label class="form-label small text-muted">Notifications:</label>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" />
                <label class="form-check-label">Enabled</label>
              </div>
            </div>
            <div class="col-12 text-end mt-4">
              <button type="reset" class="btn btn-sm btn-light me-1">
                Reset
              </button>
              <button type="submit" class="btn btn-sm btn-primary">
                Apply
              </button>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
  <!-- start: page body area -->
  <div class="px-xl-5 px-lg-4 px-3 py-3 page-body">
    <div class="row g-3 mb-3" >
      <div class="col-md-6 col-lg-3" style='width:33%; '>
        <div class="card">
          <div class="card-header">
            <h6 class="card-title mb-0"style="font-family: 'Segoe UI', sans-serif; ">New Order</h6>
          </div>
          <div class="card-body">
            <h2 style="font-size: 20px">{{reserve}}</h2>
            {% comment %} <span class="badge bg-primary">+</span> {% endcomment %}
            <button type="button" class="badge btn btn-warning" data-bs-toggle="modal" data-bs-target="#addOrderModal" > + </button>

            <span class="text-muted">Add New Order</span>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-3" style='width:33%;'>
        <div class="card">
          <div class="card-header">
            <h6 class="card-title mb-0">Today Order</h6>
          </div>
          <div class="card-body ">
            <h2 style="font-size: 20px">&#8358; {{total_amount}}</h2>
            <span class="badge bg-warning">+05% </span>
            <span class="text-muted">New income</span>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-3" style='width:33%;'>
        <div class="card">
          <div class="card-header">
            <h6 class="card-title mb-0">Total Order</h6>
          </div>
          <div class="card-body">
            <h2 style="font-size: 20px">{{customers|length}}</h2>
            <span class="badge bg-warning">+11% </span>
            <span class="text-muted">From previous period</span>
          </div>
        </div>
      </div>


      {% comment %} <div class="col-md-6 col-lg-3">
        <div class="card">
          <div class="card-header">
            <h6 class="card-title mb-0">Total Booking</h6>
          </div>
          <div class="card-body">
            <h2>{{total_booking|length}}</h2>
            <span class="badge bg-success">+21% </span>
            <span class="text-muted">From previous period</span>
          </div>
        </div>
      </div> {% endcomment %}
    </div>


    <!-- Add Order Modal -->
<div class="modal fade" id="addOrderModal" tabindex="-1" aria-labelledby="addOrderModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addOrderModalLabel" style='color:black;'>Create New Order</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <!-- Dine In / Takeaway Toggle -->
          <div class="btn-group w-100 mb-3" role="group" aria-label="Order Type">
            <input type="radio" class="btn-check" name="orderType" id="dineIn" autocomplete="off" checked>
            <label class="btn btn-outline-primary" for="dineIn">Dine In</label>

            <input type="radio" class="btn-check" name="orderType" id="takeaway" autocomplete="off">
            <label class="btn btn-outline-primary" for="takeaway">Takeaway</label>
          </div>

          <!-- Customer Name Input -->
          <div class="mb-3 " >
            <label for="customerName" class="form-label" >Customer Name</label>
            <input type="text" class="form-control" id="customerName" placeholder="Enter customer name">
          </div>

          <!-- Guest Input -->
          <div class="mb-3">
            <label for="guestCount" class="form-label">Guest</label>
            <div class="input-group">
              <input type="number" class="form-control" id="guestCount" value="1" min="1">
              <button class="btn btn-outline-secondary" type="button" onclick="this.parentNode.querySelector('input[type=number]').stepUp()">+</button>
              <button class="btn btn-outline-secondary" type="button" onclick="this.parentNode.querySelector('input[type=number]').stepDown()">-</button>
            </div>
          </div>

          <!-- Choose Table Select -->
          <div class="mb-3">
            <label for="tableSelect" class="form-label">Choose Table</label>
            <select class="form-select" id="tableSelect">
              <option selected disabled>Choose...</option>
              <option value="A1">A1</option>
              <option value="A2">A2</option>
              <option value="A3">A3</option>
              <!-- Add more options as needed -->
            </select>
          </div>

          <button type="submit" class="btn btn-warning w-100"  type="button" 
   
    data-bs-toggle="modal" 
    data-bs-target="#createOrderModal"
    id="addOrderBtn">Create Order</button>
        </form>
      </div>
    </div>
  </div>
</div>



          <style>
      .hover-effect {
         transition: color 0.3s;
    }
    .hover-effect:hover {
        color: var(--theme-color5);
    }
     </style>

    <div class="row g-3">

      <div class="col-md-12">
        <div class="card">
          <div class="card-header">
  
            <h6
            
             class="card-title hover-effect" style='font-weight:500; font-size:2rem; text-decoration:underline; hover color:var(--theme-color5);'>Menu</h6>
          </div>
          <div class="card-body">

               {% include "./menu.html" %}
            {% comment %} <div id="reservations" style="height: 280px"></div> {% endcomment %}
          </div>
        </div>
      </div>




 <div class="col-sm-12">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h6 class="card-title">Food and Drink Order Waiting List</h6>
      <!-- Search Bar -->
      <input type="text" id="searchBar" class="form-control w-25" placeholder="Search...">
    </div>
    <div class="card-body">
      <table id="order-list" class="table dataTable align-middle table-hover table-body" style="width: 100%">
        <thead>
          <tr>
            <th>Customer Name</th>
            <th>Order Type</th>
            <th>Guests</th>
            <th>Table</th>
            <th>Status</th>
            <th>Checkout</th> <!-- Added checkout column -->
          </tr>
        </thead>
        <tbody>
          <!-- Order rows will be dynamically added here -->
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
document.getElementById('addOrderBtn').addEventListener('click', function () {
    // Get form values
    const customerName = document.getElementById('customerName').value;
    const orderType = document.querySelector('input[name="orderType"]:checked').value;
    const guests = document.getElementById('guestCount').value;
    const tableNumber = document.getElementById('tableSelect').value;

    // Create new row for the order list
    const orderList = document.getElementById('order-list').querySelector('tbody');
    const newRow = document.createElement('tr');

    newRow.innerHTML = `
        <td>${customerName}</td>
        <td>${orderType}</td>
        <td>${guests}</td>
        <td>${tableNumber ? tableNumber : 'N/A'}</td>
        <td><span class="badge bg-warning">Waiting</span></td>
        <td><input type="checkbox" class="checkout-checkbox"></td> <!-- Added checkout checkbox -->
    `;

    // Append the new row to the table
    orderList.appendChild(newRow);

    // Add event listener to the checkout checkbox
    newRow.querySelector('.checkout-checkbox').addEventListener('change', function () {
        if (this.checked) {
            // Remove the row when the checkbox is checked
            newRow.remove();
        }
    });

    // Reset the form
    document.getElementById('create-order-form').reset();

    // Close the modal
    var addOrderModal = new bootstrap.Modal(document.getElementById('addOrderModal'));
    addOrderModal.hide();
});

// Search functionality
document.getElementById('searchBar').addEventListener('input', function () {
    const filter = this.value.toLowerCase();
    const rows = document.getElementById('order-list').querySelectorAll('tbody tr');

    rows.forEach(row => {
        const cells = row.getElementsByTagName('td');
        let match = false;

        for (let cell of cells) {
            if (cell.textContent.toLowerCase().includes(filter)) {
                match = true;
                break;
            }
        }

        row.style.display = match ? '' : 'none';
    });
});
</script>

    </div>
  </div>
</div>

{% endblock content %}
